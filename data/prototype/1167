public class ThreeWayQuickSort<T extends Comparable<T>> {
    public void sort(T[] array, int left, int right) {
        if (left < right) this.partition(array, left, right);
    }
    private void partition(T[] array, int left, int right) {
        if (left < right) {
            int start = left;
            int end = right;
            int i = left;
            T pivot = array[left];
            while (i <= end) {
                if (array[i].compareTo(pivot) < 0) {
                    this.swap(array, start, i);
                    start++;
                    i++;
                } else if (array[i].compareTo(pivot) > 0) {
                    this.swap(array, i, end);
                    end--;
                } else i++;
            }
            sort(array, left, start - 1);
            sort(array, end + 1, right);
        }
    }
    private void swap(T[] array, int i, int j){
        T temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }
}